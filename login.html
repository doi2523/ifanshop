<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>iFanShop | Login</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="icon" href="images/marketplace.png" type="image/x-icon">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="style.css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="css/login.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
  <div class="container"> 
    <a class="navbar-brand navbar-logo" href="index.html"><img style="height: 50px;" src="images/ifa1.png" alt=""></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="fas fa-bars"></span> </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item"> <a class="nav-link" href="index.html">Trang chủ</a> </li>
        <li class="nav-item"> <a class="nav-link" href="about.html">Giới thiệu</a> </li>
        <!-- <li class="nav-item"> <a class="nav-link" href="sanpham.html">Sản phẩm</a> </li> -->
        <li class="nav-item dropdown"> 
          <a class="nav-link dropdown-toggle" href="#" id="login" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Sản phẩm<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 8 2" fill="currentColor" id="icon" class="rotate-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.646 3.708L0.645996 0.708L1.354 0L4 2.647L6.646 0L7.354 0.708L4.354 3.708L4 4.061L3.646 3.708Z" fill="currentColor"></path></svg>
          </a>        
          <div class="dropdown-menu" aria-labelledby="navbarDropdown" style="	background: linear-gradient(to left, #7a60ff, #cd9ffa); color: #fff;">
              <a class="dropdown-item" href="iphone.html" style=" text-transform: none; font-size: 17px;">iPhone</a>
              <a class="dropdown-item" href="macbook.html" style=" text-transform: none; font-size: 17px;">Macbook</a>
              <a class="dropdown-item" href="ipad.html" style=" text-transform: none; font-size: 17px;">iPad</a>
              <a class="dropdown-item" href="accessory.html" style=" text-transform: none; font-size: 17px;">Phụ kiện</a>
          </div>
        </li>
        <li class="nav-item"> <a class="nav-link" href="services.html">Dịch vụ</a> </li>
        <li class="nav-item"> <a class="nav-link" href="giohang.html">Giỏ hàng</a> </li>
        <li class="nav-item"> <a class="nav-link" href="contact.html">Liên hệ</a> </li>
        <li class="nav-item"> <a class="nav-link" href="login.html">Đăng nhập</a> </li>
    </ul>
      </ul>
    </div>
  </div>
</nav>
<!-- End Navbar --> 
<!-------Banner Start------->
<section class="banner" data-scroll-index='0'>
  <div class="banner-overlay">
    <div class="container">
      <br>
      <br>
      <section class="forms-section">
        <h1 class="section-title">Login & SignUp</h1>
        <div class="forms">
        <div class="form-wrapper is-active">
        <button type="button" class="switcher switcher-login">Đăng nhập
          <span class="underline"></span>
        </button>

        <form class="form form-login">
          <fieldset>
          <legend>Please, enter your email and password for login.</legend>
          <div class="input-block">
          <label for="login-email">E-mail</label>
          <input id="login-email" type="text" required autocomplete="email" name="txt-user-login"></div>
          <div class="input-block">
          <label for="login-password">Password</label>
          <input id="login-password" type="password" name="txt-password-login" autocomplete="current-password" required></div>
          <a href="findacc.html"><div>Quên mật khẩu?</div></a>
          </fieldset>
          <button id="sign-in" type="submit" class="btn-login" name="btn-login">Đăng nhập</button>
          <div id="loginSuccessMessage" style="display: none;"></div>
          <p class="notee" id="loginMessage"></p>
        </form>
            <!-- Cách ra cho biết phần name nè -->
            <!-- Cách ra cho biết phần name nè -->
          </div>
          <div class="form-wrapper">
            <button type="button" class="switcher switcher-signup">Đăng ký
              <span class="underline"></span>
            </button>
            <!-- Cách ra cho biết phần name nè -->
            <!-- Cách ra cho biết phần name nè -->
        <form class="form form-signup">
            <fieldset>
            <legend>Please, enter your email, password and password confirmation for sign up.</legend>
            <div class="input-block">
            <label for="signup-username">Username</label>
            <input id="signup-username" type="text" name="txt-username-signup" autocomplete="username" required></div>
            <div class="input-block">
            <label for="signup-email">E-mail</label>
            <input id="signup-email" type="email" required name="txt-email-signup"></div>
            <div class="input-block">
            <label for="signup-password">Password</label>
            <input id="signup-password" type="password" required autocomplete="current-password" name="txt-password-signup"></div>
            <a href="" id="have-account">Bạn đã có tài khoản?</a>
            </fieldset>
            <button id="signup" type="submit" class="btn-signup" name="bt-signup">Đăng ký</button>
            <div id="signupSuccessMessage" style="display: none;">Đăng ký thành công!</div>
            <p class="notee" id="signupMessage"></p>
        </form></div></div>
          </section>
    </div>
  </div>
  </section>


<footer class="footer-copy">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <p>2024 &copy; Applight. Website Designed by <a href="" target="_blank" rel="dofollow">Doi teamwork</a></p>
      </div>
    </div>
  </div>
</footer>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script> 
<script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script> 
<!-- scrollIt js --> 
<script src="js/scrollIt.min.js"></script> 
<script src="js/wow.min.js"></script> 
<script src="js/script.js"></script>
<script src="js/login.js"></script>
</script>
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-analytics.js";
  import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCnZzlFSm-61oaNvO2TTJyef2PMc6iU8DY",
    authDomain: "user-inifanshop.firebaseapp.com",
    databaseURL: "https://user-inifanshop-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "user-inifanshop",
    storageBucket: "user-inifanshop.appspot.com",
    messagingSenderId: "104690936940",
    appId: "1:104690936940:web:5398fbb0edae0c7a76bc49",
    measurementId: "G-NLBDR28748"
  };
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const database = getDatabase(app);
  const auth = getAuth();


document.getElementById('signup').addEventListener('submit', function(event) {
    event.preventDefault();
    
    var username = document.getElementById("signup-username").value;
    var email = document.getElementById("signup-email").value;
    var password = document.getElementById("signup-password").value;

    createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed up 
    const user = userCredential.user;

    set(ref(database, 'users/' + user.uid),{
        username : username,
        email: email,
        password: password
    })
    alert('Đăng ký thành công!');
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..
    alert('Đăng ký thất bại!');
  });
});


document.getElementById('sign-in').addEventListener('submit', function(event) {
    event.preventDefault();

    var email = document.getElementById("login-email").value;
    var password = document.getElementById("login-password").value;

    signInWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    const dt = new Date();
    update(ref(database, 'users/' + user.uid),{
        last_login : dt,
    })
    alert('Đăng nhập thành công!');
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    alert('Đăng nhập thất bại!');
  });
});
</script>
</html>